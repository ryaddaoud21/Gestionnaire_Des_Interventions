(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{20:function(e,t,a){"use strict";a.r(t);var n=a(39),r=a(1),i=a.n(r),s=a(34),l=a(31),o=a(23),c=(a(27),a(29)),m=a(46),d=a.n(m),u=a(118),h=a(93),p=a(117);function f(e){var t=e.upsideDown?"/wave1-bottom.png":"/wave1.png",a=e.upsideDown?"/wave2-bottom.png":"/wave2.png",n=e.upsideDown?"/wave3-bottom.png":"/wave3.png",r=e.upsideDown?{top:"-2px",marginTop:0}:{},s=e.upsideDown?{backgroundPosition:"0 top",transformOrigin:"center top",marginTop:0}:{backgroundPosition:"0 bottom",transformOrigin:"center bottom"};return i.a.createElement("div",{className:"wave-effect wave-anim",style:r},i.a.createElement("div",{className:"waves-shape shape-one"},i.a.createElement("div",{className:"wave wave-one",style:Object(l.a)({backgroundImage:"url(".concat(t,")")},s)})),i.a.createElement("div",{className:"waves-shape shape-two"},i.a.createElement("div",{className:"wave wave-two",style:Object(l.a)({backgroundImage:"url(".concat(a,")")},s)})),i.a.createElement("div",{className:"waves-shape shape-three"},i.a.createElement("div",{className:"wave wave-three",style:Object(l.a)({backgroundImage:"url(".concat(n,")")},s)})))}function g(e){return i.a.createElement(o.b,{className:"pb-8",style:{background:"linear-gradient(to right, #363795, #005C97)",position:"relative"}},e.children,i.a.createElement(f,null))}var y=a(0),E=a.n(y),b=a(7),w=function(e){return"https://django.doctor".concat(e)},v=function(e){return"https://django.doctor".concat(e)},S=function(e){var t=e.title,a=e.url,n=e.description,r=e.contentType,i=e.published,s=e.updated,l=e.category,o=e.tags,c=e.twitter,m=e.image,d=[{itemprop:"name",content:t},{itemprop:"description",content:n},{name:"description",content:n},{name:"twitter:site",content:"@DjangoDoctor"},{name:"twitter:title",content:"".concat(t," | django.doctor")},{name:"twitter:description",content:n},{name:"twitter:creator",content:c||"@djangodoctor"},{name:"og:title",content:"".concat(t," | django.doctor")},{name:"og:type",content:r},{name:"og:url",content:a},{name:"og:description",content:n},{name:"og:site_name",content:"django.doctor"},{name:"og:locale",content:"en_EN"}];return i&&d.push({name:"article:published_time",content:i}),s&&d.push({name:"article:modified_time",content:s}),l&&d.push({name:"article:section",content:l}),o&&d.push({name:"article:tag",content:o}),m?(d.push({itemprop:"image",content:v(m)}),d.push({name:"twitter:image:src",content:v(m)}),d.push({name:"og:image",content:v(m)}),d.push({name:"twitter:card",content:"summary_large_image"})):d.push({name:"twitter:card",content:"summary"}),d},T=function(e){var t=e.schema,a={lang:"en"};return t&&(a=Object(l.a)({},a,{itemscope:void 0,itemtype:"http://schema.org/".concat(t)})),a};T.propTypes={schema:E.a.string};var k=function(e){var t=e.schema,a=e.title,n=e.description,r=e.contentType,s=e.published,l=e.updated,o=e.category,c=e.tags,m=e.twitter,d=e.image;return i.a.createElement(b.b,{htmlAttributes:T({schema:t}),title:"".concat(a," | django.doctor"),link:[{rel:"canonical",href:w(window.location.pathname)}],meta:S({title:a,description:n,contentType:r,url:w(window.location.pathname),published:s,updated:l,category:o,tags:c,twitter:m,image:d})})};k.defaultProps={title:"Django linter & improvement suggestion engine",description:"Improve your Django code with our linter and improvement suggestion engine. Lint on your CI. GitHub integration.",contentType:"website",image:"/og-image/default.png"};var C=k;u.a.registerLanguage("python",h.a);var N="maintainability",q="performance",x="security";function z(e){return i.a.createElement(o.b,null,i.a.createElement(C,{image:e.ogImage,title:"".concat(e.title," best practice")}),i.a.createElement(g,null,i.a.createElement(o.b,{className:"container-lg lead text-white pt-2 pb-9 pb-md-8 pt-md-8 pl-4 pl-md-0"},i.a.createElement(o.c,null,i.a.createElement(o.c.Item,{as:c.b,to:"/",className:"text-white"},"Home"),i.a.createElement(o.c.Item,{as:c.b,to:"/advice/".concat(e.category),className:"text-white"},i.a.createElement("span",{style:{textTransform:"capitalize"}},e.category)," advice"),i.a.createElement("br",null)),i.a.createElement(o.l,{className:"mb-0 text-white",style:{display:"block"}},e.title))),i.a.createElement("div",{className:"container-lg px-3 mb-9",style:{fontSize:"16px"}},i.a.createElement("div",{className:"col-md-8 text-normal"},i.a.createElement("div",{style:{marginBottom:"30px"},className:"f3"},e.children),e.explanation&&i.a.createElement("div",{className:"f3"},e.explanation),e.after&&i.a.createElement("div",{className:"f3"},i.a.createElement("p",{fontSize:2},"So in practice, do this"),i.a.createElement(u.a,{customStyle:{background:"none"},language:"python",style:p.a},e.after)),e.before&&i.a.createElement("div",{className:"f3"},i.a.createElement("p",{fontSize:2},"Instead of this"),i.a.createElement(u.a,{customStyle:{background:"none"},language:"python",style:p.a},e.before)),i.a.createElement(o.j,{className:"mb-6 f3 mt-6 mb-4"},"Are you affected? Check with ",i.a.createElement("a",{href:"https://pypi.org/project/django-doctor/"},i.a.createElement("pre",{style:{display:"inline",fontSize:"inherit"}},"pip install django-doctor")),"."),i.a.createElement(o.b,{className:"mb-8"},i.a.createElement(o.l,{fontSize:4,className:"mb-2"},"Configuring this check"),i.a.createElement(o.q,{as:"p",className:"f3"},"Django Doctor will run this check by default. No configuration is needed but the check can be turned on/off using check code ",i.a.createElement("code",{className:"f3"},e.wordCode)," in your pyproject.toml file."),i.a.createElement(o.q,{className:"f3"},i.a.createElement(c.b,{to:"/config"},"Read more")," about configuring Django Doctor.")),i.a.createElement(o.b,null,i.a.createElement(o.l,{fontSize:4,marginBottom:"28px"},"Further reading"),i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(c.b,{to:"/advice/".concat(e.category)},"All ",e.category," advice")),e.furtherReading.map(function(e){var t=e.href,a=e.text;return i.a.createElement("li",null,i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t},a))}))))))}z.defaultProps={furtherReading:[],ogImage:"/printscreen_commandline_check.png"};var _="Django version is no longer supported",I="django-version-support";function j(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Django version is not receiving bug fixes, and security fixes, and data-loss fixes.")}var R=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"Django releases are supported for a limited period of time. Some Django releases are ",i.a.createElement("i",null,"long-term support")," (LTS) releases, which will get security and data loss fixes applied for typically three years."),i.a.createElement(o.q,{as:"p"},"If the Django version a project uses is no longer supported then it will be vulnerable to bugs and hacks with no path to redemptions, so it is advisable to upgrade Django to a supported version."));j.title=_,j.wordCode=I,j.category=x,j.impact="high",j.explanation=R;var M="Django bugfixes and additional features available",F="django-minor-version";function D(e){return i.a.createElement(o.q,{as:"p",className:e.className},"New version of Django is available, including bug fixes and new features.")}var O=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"New Django versions are frequently released that apply bug fixes, security fixes, and data loss fixes."),i.a.createElement(o.q,{as:"p"},"If the Django version a project uses does not have the latest version then it will be more vulnerable to bugs and hacks, so it is advisable to upgrade Django to the latest version."));D.title=M,D.wordCode=F,D.category=x,D.impact="medium",D.explanation=O;var P="Nullable string field",H="nullable-string-field";function L(e){return i.a.createElement(o.q,{as:"p",className:e.className},"ORM queries and Python code are made more complex because values will sometimes be ",i.a.createElement("code",{style:{fontSize:"inherit"}},"None")," and other times ",i.a.createElement("code",{style:{fontSize:"inherit"}},"str"),".")}var U=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"The null attribute specifies that the field can be None (null at database level). This is useful for optional fields."),i.a.createElement(o.q,{as:"p"},"This adds complexity as the data type is inconsistent: some instances may be strings and others None. This complicates ORM queries and extra code must guard against performing str operations on a NoneType."),i.a.createElement(o.q,{as:"p"},"This problem is avoided by specifying default='' instead. The database will even throw an exception if there is an attempt to explicitly save None, thus avoiding bad data."));L.title=P,L.wordCode=H,L.category=N,L.impact="low",L.explanation=U;var A="Tall Model",B="tall-model";function Y(e){return i.a.createElement(o.q,{as:"p",className:e.className},"A taller Model with many fields may be more difficult to maintain than a shorter Model with fewer fields.")}var X=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"There is a limit to how many items a developer can consider when forming a mental model of source code."),i.a.createElement(o.q,{as:"p"},"It may be time to split the Model into multiple Models with a OneToOne relationship."));Y.title=A,Y.wordCode=B,Y.category=N,Y.impact="low",Y.explanation=X;var W="Redundant default arguments",G="redundant-default-args";function V(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Stating defaults add complexity when reading the code but does not change Django's behaviour.")}var K=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"Python allows function arguments to have default values. The default value is used when the function is called without the argument."),i.a.createElement(o.q,{as:"p"},"Redundant default arguments are explicitly passing in default values when calling a function."),i.a.createElement(o.q,{as:"p"},"Redundant default arguments are noise. They don't add value but do add maintenance overhead. The code will execute the same without specifying them. Reduce the amount of code that needs to be read and maintained by deleting redundant default arguments."));V.title=W,V.wordCode=G,V.category=N,V.impact="low",V.explanation=K;var J="Field allows null but not blank",Q="field-null-not-blank";function $(e){return i.a.createElement(o.q,{as:"p",className:e.className},"If null is ",i.a.createElement("code",{style:{fontSize:"inherit"}},"True")," and blank is ",i.a.createElement("code",{style:{fontSize:"inherit"}},"False")," then validation becomes more complex.")}var Z=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"If null is True and blank is False then Django and the database disagree on whether empty values are allowed."),i.a.createElement(o.q,{as:"p"},"The null and blank attributes are useful for optional fields. Both attributes default to False."),i.a.createElement(o.q,{as:"p"},"The null attribute specifies that the database will accept no value. The blank attribute specifies Django should not check if the value is present when Model.clean is called."),i.a.createElement(o.q,{as:"p"},"If Model.save is called via the shell without first calling Model.clean: the bad data will be saved and there may be unwanted side effects:"),i.a.createElement("ul",null,i.a.createElement("li",null,"next time that record is validated it will fail"),i.a.createElement("li",null,"the datatype will be inconsistent"),i.a.createElement("li",null,"ORM queries will be  more complex")),i.a.createElement(o.q,{as:"p"},"These unwanted side effects can cause more serious problems that are hard to debug long after the original error occurred."));$.title=J,$.wordCode=Q,$.category=N,$.impact="low",$.explanation=Z;var ee="Brittle unique_for",te="brittle-unique-for";function ae(e){return i.a.createElement(o.q,{as:"p",className:e.className},i.a.createElement("code",{style:{fontSize:"inherit"}},"unique_for_date/month/year")," is very brittle and over time will likely be a source for unexpected behaviour.")}var ne=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},i.a.createElement("code",{style:{fontSize:"inherit"}},"unique_for_date/month/year")," prevents entry of two records with the same value on the same date or month or year."),i.a.createElement(o.q,{as:"p"},"However, this feature is unfortunately brittle:"),i.a.createElement("ul",null,i.a.createElement("li",null,"This constraint is not enforced by the database."),i.a.createElement("li",null,"It is checked during ",i.a.createElement("code",{style:{fontSize:"inherit"}},"Model.validate_unique()")," and so will not occur if Model.save() is called without first calling ",i.a.createElement("code",{style:{fontSize:"inherit"}},"Model.validate_unique()"),"."),i.a.createElement("li",null,"The constraint will not be checked even if ",i.a.createElement("code",{style:{fontSize:"inherit"}},"Model.validate_unique()")," is called when using a ModelForm that does not include a field involved in the check."),i.a.createElement("li",null,"Only the date portion of the field will be considered, even when validating a ",i.a.createElement("code",{style:{fontSize:"inherit"}},"DateTimeField"),".")),i.a.createElement(o.q,{as:"p"},"Most of these problems can be mitigated by moving the validation to ",i.a.createElement("code",{style:{fontSize:"inherit"}},"Model.save()"),"."));ae.title=ee,ae.wordCode=te,ae.category=N,ae.impact="medium",ae.explanation=ne;var re="ForeignKey missing related_name",ie="missing-related-name";function se(e){return i.a.createElement(o.q,{as:"p",className:e.className},"ORM queries are more readable and relationships more explicit when ",i.a.createElement("code",{style:{fontSize:"inherit"}},"related_name")," is specified.")}var le=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"The related_name attribute specifies the name of the reverse relation from the related model back to the model."),i.a.createElement(o.q,{as:"p"},"Django automatically creates a related_name if related_name is not set. Django uses the lower-case name of the model with the suffix _set."));se.title=re,se.wordCode=ie,se.category=N,se.impact="low",se.explanation=le;var oe="CharField with huge max_length",ce="huge-max-length";function me(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Using ",i.a.createElement("code",{style:{fontSize:"inherit"}},"TextField")," for very long string fields would simplify the code and make is easier to maintain.")}var de=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"CharField should be used for smaller strings and TextField should be used for larger strings."),i.a.createElement(o.q,{as:"p"},"CharField max_length adds value when the value is known format (phone numbers, ISBN) with a known maximum valid length."),i.a.createElement(o.q,{as:"p"},"For arbitrary long text the max_length adds scope for unwanted validation errors without adding value elsewhere. Remove it and rely on unconstrained TextField."));me.title=oe,me.wordCode=ce,me.category=N,me.impact="low",me.explanation=de;var ue="Deprecated NullBooleanField",he="deprecated-nullboolean-field";function pe(e){return i.a.createElement(o.q,{as:"p",className:e.className},i.a.createElement("code",{style:{fontSize:"inherit"}},"NullBooleanField")," is deprecated and will be removed a future version of Django.")}var fe=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"NullBooleanField is like BooleanField with null=True."),i.a.createElement(o.q,{as:"p"},"Historically the only values BooleanField accepted was True and False. BooleanField didn't permit null=True. If null was a valid value then NullBooleanField was used instead."));pe.title=ue,pe.wordCode=he,pe.category=N,pe.impact="medium",pe.explanation=fe;var ge="Non-unique primary_key",ye="non-unique-primary";function Ee(e){return i.a.createElement(o.q,{as:"p",className:e.className},"A non-unique primary key allows the same value to be used for multiple records thus multiple results could be returned for ",i.a.createElement("code",{style:{fontSize:"inherit"}},"Model.objects.get(pk=1)"),".")}var be=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"A primary key is used to uniquely identify each record in the Model's database table."),i.a.createElement(o.q,{as:"p"},"primary_key=True denotes the field is the primary key for the model."),i.a.createElement(o.q,{as:"p"},"primary_key=True implies null=False and unique=True."));Ee.title=ge,Ee.wordCode=ye,Ee.category=N,Ee.impact="high",Ee.explanation=be;var we="Huge models.py",ve="tall-models";function Se(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Taller ",i.a.createElement("code",{style:{fontSize:"inherit"}},"models.py")," with many Models may be more difficult to maintain than shorter ",i.a.createElement("code",{style:{fontSize:"inherit"}},"models.py")," with fewer Models.")}var Te=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"There is a limit to how many items a developer can consider when forming a mental model of source code."),i.a.createElement(o.q,{as:"p"},"It may be time to split an application if models.py is very long."));Se.title=we,Se.wordCode=ve,Se.category=N,Se.impact="low",Se.explanation=Te;var ke="Model method order",Ce="model-method-order";function Ne(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Increasing standardisation and predictability of your code style helps other developers read your code.")}var qe=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"The Django Coding Style suggests the following order of inner classes, methods and attributes:"),i.a.createElement("ol",{style:{marginLeft:"25px",marginBottom:"15px"}},i.a.createElement("li",null,"Field choice tuples"),i.a.createElement("li",null,"Database fields"),i.a.createElement("li",null,"Custom manager attributes"),i.a.createElement("li",null,"class Meta"),i.a.createElement("li",null,"def __str__()"),i.a.createElement("li",null,"def save()"),i.a.createElement("li",null,"def delete"),i.a.createElement("li",null,"def get_absolute_url()"),i.a.createElement("li",null,"Any custom methods")),i.a.createElement(o.q,{as:"p"},"This standardisation is very useful when Python should be written to be read."));Ne.title=ke,Ne.wordCode=Ce,Ne.category=N,Ne.impact="low",Ne.explanation=qe;var xe="Tall models.py with a common prefix",ze="model-common-prefix";function _e(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Taller ",i.a.createElement("code",{style:{fontSize:"inherit"}},"models.py")," with many Models may be more difficult to maintain than shorter ",i.a.createElement("code",{style:{fontSize:"inherit"}},"models.py")," with fewer Models.")}var Ie=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"There is a limit to how many items a developer can consider when forming a mental model of source code."),i.a.createElement(o.q,{as:"p"},"It may be time to split an application if models.py is very long."),i.a.createElement(o.q,{as:"p"},"A good starting point would be to move models with the same prefix to a sub-application."));_e.title=xe,_e.wordCode=ze,_e.category=N,_e.impact="low",_e.explanation=Ie;var je="Middleware order",Re="middleware-order";function Me(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"The order of middleware affections the outcome."),i.a.createElement(o.q,{as:"p"},"Some middleware are dependant on the functionality of other middleware. For example a middleware that requires usage of request.session should come after the SessionMiddleware."))}Me.title=je,Me.wordCode=Re,Me.category=N,Me.impact="high";var Fe="Relative path in TEMPLATES setting",De="template-dir-relative";function Oe(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"The TEMPLATE setting is a list of the template engines used when finding template files and rendering them."),i.a.createElement(o.q,{as:"p"},"The DIRS key within the TEMPLATE list denotes the directories where the engine should look for template source files."),i.a.createElement(o.q,{as:"p"},"DIRS must be absolute paths. Relative paths will not work."))}Oe.title=Fe,Oe.wordCode=De,Oe.category=N,Oe.impact="high";var Pe="Back slashes in TEMPLATES settings",He="template-dir-backslash";function Le(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"The TEMPLATE setting is a list of the template engines used when finding template files and rendering them."),i.a.createElement(o.q,{as:"p"},"The DIRS key within the TEMPLATE list denotes the directories where the engine should look for template source files."),i.a.createElement(o.q,{as:"p"},"DIRS must be forward slashes, even in Windows. Forward slashes do not need escaping, and they are cross Operating System compatible."))}Le.title=Pe,Le.wordCode=He,Le.category=N,Le.impact="high";var Ue="Middleware should be near the end",Ae="middleware-order-end";function Be(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Incorrectly ordered middleware can stop the middleware working as intended.")}var Ye=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"The order of middleware affections the outcome."),i.a.createElement(o.q,{as:"p"},"Some middleware should be near the end of the middleware list to ensure it is one of the last to be called."),i.a.createElement(o.q,{as:"p"},"For example RedirectFallbackMiddleware and FlatpageFallbackMiddleware should be near the end."));Be.title=Ue,Be.wordCode=Ae,Be.category=N,Be.impact="high",Be.explanation=Ye;var Xe="Middleware should be near the top",We="middleware-order-top";function Ge(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Incorrectly ordered middleware can stop the middleware working as intended.")}var Ve=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"The order of middleware affections the outcome."),i.a.createElement(o.q,{as:"p"},"Some middleware should be near the top of the middleware list to ensure it is one of the first to be called."),i.a.createElement(o.q,{as:"p"},"For example CommonMiddleware, LocaleMiddleware, and SecurityMiddleware should be near the top."));Ge.title=Xe,Ge.wordCode=We,Ge.category=N,Ge.impact="high",Ge.explanation=Ve;var Ke="Redundant setting",Je="redundant-setting";function Qe(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Stating defaults add complexity when reading the code but does not change Django's behaviour.")}var $e=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"Django defines a set of default values that can be overridden in the settings file."),i.a.createElement(o.q,{as:"p"},"Explicitly overriding the default values with the same value as the default value is redundant."),i.a.createElement(o.q,{as:"p"},"Redundant settings increase noise when developers are reading the settings file, making the code harder to maintain."));Qe.title=Ke,Qe.wordCode=Je,Qe.category=N,Qe.impact="low",Qe.explanation=$e;var Ze="Importing setting file directly",et="direct-import-settings";function tt(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Using ",i.a.createElement("code",{style:{fontSize:"inherit"}},"from django.conf import settings")," simplifies the code and makes it more maintainable.")}var at=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"It's preferable to use ",i.a.createElement("code",{style:{fontSize:"inherit"}},"from django.conf import settings")," instead of importing the settings file directly."),i.a.createElement(o.q,{as:"p"},"Importing directly can trigger a race condition when your code imports settings before the app is ready."),i.a.createElement(o.q,{as:"p"},"Overriding settings in tests is simplified when using ",i.a.createElement("code",{style:{fontSize:"inherit"}},"django.conf.settings")," as you can then use Django's ",i.a.createElement("a",{href:"https://docs.djangoproject.com/en/3.1/topics/testing/tools/#django.test.modify_settings",target:"_blank",rel:"noopener noreferrer"},i.a.createElement("code",{style:{fontSize:"inherit"}},"modify_settings"))," and django-pytest's ",i.a.createElement("a",{href:"https://pytest-django.readthedocs.io/en/latest/helpers.html#settings",target:"_blank",rel:"noopener noreferrer"},i.a.createElement("code",{style:{fontSize:"inherit"}},"settings"))," fixture, which rely on the code using ",i.a.createElement("code",{style:{fontSize:"inherit"}},"django.conf.settings"),"."));tt.title=Ze,tt.wordCode=et,tt.category=N,tt.impact="medium",tt.explanation=at;var nt="Security middleware not activated",rt="missing-security-middleware";function it(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Your website is vulnerable to a number of common hacker attacks because ",i.a.createElement("code",{style:{fontSize:"inherit"}},"MIDDLEWARE")," setting is missing ",i.a.createElement("code",{style:{fontSize:"inherit"}},"django.middleware.security.SecurityMiddleware"),".")}var st=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p",className:"mb-3"},"Django's SecurityMiddleware performs a suite of security checks and enhancements. By not including this middleware the following security features are not enabled:"),i.a.createElement("ul",{className:"bullet-list-blue"},i.a.createElement("li",{className:"mb-3"},i.a.createElement("strong",null,i.a.createElement("a",{href:"https://docs.djangoproject.com/en/3.1/ref/middleware/#http-strict-transport-security",target:"_blank",rel:"noopener noreferrer"},"HTTP Strict Transport Security"))," SecurityMiddleware can tell the browser to always use HTTPS for your website (avoiding your website doing a HTTP to HTTPS redirect every time)."),i.a.createElement("li",{className:"mb-3"},i.a.createElement("strong",null,i.a.createElement("a",{href:"https://docs.djangoproject.com/en/3.1/ref/middleware/#referrer-policy",target:"_blank",rel:"noopener noreferrer"},"Referrer Policy"))," SecurityMiddleware sets the referer policy header, which impacts user privacy."),i.a.createElement("li",{className:"mb-3"},i.a.createElement("strong",null,i.a.createElement("a",{href:"https://docs.djangoproject.com/en/3.1/ref/middleware/#x-content-type-options-nosniff",target:"_blank",rel:"noopener noreferrer"},"X-Content-Type-Options"))," SecurityMiddleware sets the ",i.a.createElement("code",{style:{fontSize:"inherit"}},"X-Content-Type-Options")," header to ",i.a.createElement("code",{style:{fontSize:"inherit"}},"nosniff")," to prevent hackers from tricking your website into executing a malicious javascript file that they uploaded."),i.a.createElement("li",{className:"mb-3"},i.a.createElement("strong",null,i.a.createElement("a",{href:"https://docs.djangoproject.com/en/3.1/ref/middleware/#x-xss-protection-1-mode-block",target:"_blank",rel:"noopener noreferrer"},"X-XSS-Protection"))," SecurityMiddleware sets the ",i.a.createElement("code",{style:{fontSize:"inherit"}},"X-XSS-Protection")," header to ",i.a.createElement("code",{style:{fontSize:"inherit"}},"1; mode=block")," to enable the browser's built-in XSS protection. This fearure is present on Internet Explorer, Chrome and Safari."),i.a.createElement("li",{className:"mb-3"},i.a.createElement("strong",null,i.a.createElement("a",{href:"https://docs.djangoproject.com/en/3.1/ref/middleware/#ssl-redirect",target:"_blank",rel:"noopener noreferrer"},"SSL Redirect"))," SecurityMiddleware can redirect HTTP connections to HTTPS if ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SECURE_SSL_REDIRECT")," is set to ",i.a.createElement("code",{style:{fontSize:"inherit"}},"True"),".")));it.title=nt,it.wordCode=rt,it.category=x,it.impact="high",it.explanation=st;var lt="Clickjacking protection not activated",ot="missing-xframe-middleware";function ct(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Your website is vulnerable to clickjack attack because the ",i.a.createElement("code",{style:{fontSize:"inherit"}},"MIDDLEWARE")," setting is missing ",i.a.createElement("code",{style:{fontSize:"inherit"}},"django.middleware.clickjacking.XFrameOptionsMiddleware")," - so users can be tricked into interacting with your website without realising.")}var mt=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p",className:"mb-3"},"If unprotected, an invisible iframe pointing at your site can be placed on top of a innocent looking button on the malicious web page - so when the user clicks the innocent button they'are actually interacting with a button on your web page."),i.a.createElement(o.q,{as:"p",className:"mb-3"},"You may find iframes useful though, so, so Django allows setting the policy to SAMEORIGIN via ",i.a.createElement("code",{style:{fontSize:"inherit"}},"X_FRAME_OPTIONS = 'SAMEORIGIN'")));ct.title=lt,ct.wordCode=ot,ct.category=x,ct.impact="high",ct.explanation=mt;var dt="Cross Site Request Forgery protection not activated",ut="missing-csrf-middleware";function ht(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Your website is vulnerable to CSRF attacks because the ",i.a.createElement("code",{style:{fontSize:"inherit"}},"MIDDLEWARE")," setting is missing ",i.a.createElement("code",{style:{fontSize:"inherit"}},"CsrfViewMiddleware")," - so a hacker can fool your website into thinking a request is coming from a logged in user.")}var pt=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p",className:"mb-3"},"If unprotected, when one of your logged-in users accesses a malicious website, that website can perform a request to your website and your website will think the request was performed by the user."),i.a.createElement(o.q,{as:"p",className:"mb-3"},"This can be avoided by using CSRF protection - which adds a cycling string to forms on your website. Django then checks if the submitted string is as expected. If it's not then the request probably did not come from your website."),i.a.createElement(o.q,{as:"p",className:"mb-3"},"Additionally, making sure that GET request are free from side-effects (so don't submit a form that creates a database entry on GET) helps avoud this problem."));ht.title=dt,ht.wordCode=ut,ht.category=x,ht.impact="high",ht.explanation=pt;var ft="HTTP Strict Transport Security protection not activated",gt="missing-hsts-middleware";function yt(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Your website is vulnerable to Man In The Middle attacks because the ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SECURE_HSTS_SECONDS")," setting is missing - so a hacker can intercept and change requests performed over HTTP.")}var Et=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p",className:"mb-3"},"If your website should be accessed via HTTPS then consider setting ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SECURE_HSTS_SECONDS"),". This will make the browser block HTTP requests to your website and instead use HTTPS."),i.a.createElement(o.q,{as:"p",className:"mb-3"},'HSTS can be thought of like "client side HTTP to HTTPS redirect": the browser will turn HTTP to HTTPS requests.'),i.a.createElement(o.q,{as:"p",className:"mb-3"},"If your website is using HTTPS, then it is likely that your website redirects HTTP to HTTPS (if not, it should). However, a Man In The Middle attack can intercept the initial HTTP request and instead serve the user a malicious webpage that looks like your website. ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SECURE_HSTS_SECONDS")," reduces the change of that because the brower will simply not do HTTP requests to your website."),i.a.createElement(o.q,{as:"p",className:"mb-3"},"When first setting ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SECURE_HSTS_SECONDS")," it's worth using a small value like 3600 (1 hour) to check it works as expected, as once the browser sees the HSTS header it will respect it until the specified time is met."),i.a.createElement(o.q,{as:"p",className:"mb-3"},"Note it's safe to set ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SECURE_HSTS_SECONDS")," in your local dev env, as the header is only set when accessing the website via HTTPS, not HTTP."));yt.title=ft,yt.wordCode=gt,yt.category=x,yt.impact="high",yt.explanation=Et;var bt="Subdomains not protected by HSTS",wt="missing-hsts-subdomain";function vt(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Your website is vulnerable to Man In The Middle attacks on subdomains because the ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SECURE_HSTS_INCLUDE_SUBDOMAINS")," setting is missing - so a hacker can intercept and change requests performed over HTTP.")}var St=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p",className:"mb-3"},"If your website should be accessed via HTTPS then consider enabling ",i.a.createElement(c.b,{to:"/advice/C4010"},"HSTS")," and setting ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SECURE_HSTS_INCLUDE_SUBDOMAINS")," to protect subdomains. This will make the browser block HTTP requests to your website and instead use HTTPS."),i.a.createElement(o.q,{as:"p",className:"mb-3"},'HSTS can be thought of like "client side HTTP to HTTPS redirect": the browser will turn HTTP to HTTPS requests.'),i.a.createElement(o.q,{as:"p",className:"mb-3"},"If your website is using HTTPS, then it is likely that your website redirects HTTP to HTTPS (if not, it should). However, a Man In The Middle attack can intercept the initial HTTP request and instead serve the user a malicious webpage that looks like your website. ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SECURE_HSTS_INCLUDE_SUBDOMAINS")," reduces the change of that because the brower will simply not do HTTP requests to your website."),i.a.createElement(o.q,{as:"p",className:"mb-3"},"Note it's safe to set ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SECURE_HSTS_INCLUDE_SUBDOMAINS")," in your local dev env, as the header is only set when accessing the website via HTTPS, not HTTP."));vt.title=bt,vt.wordCode=wt,vt.category=x,vt.impact="high",vt.explanation=St;var Tt="Browser can be tricked into executing uploaded malicious code",kt="missing-secure-content-type-nosniff";function Ct(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Your website is vulnerable to being tricked into executing uploaded malcious code because the ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SECURE_CONTENT_TYPE_NOSNIFF")," setting is not set.")}Ct.title=Tt,Ct.wordCode=kt,Ct.category=x,Ct.impact="high",Ct.explanation=Nt;var Nt=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p",className:"mb-3"},i.a.createElement("code",{style:{fontSize:"inherit"}},"SecurityMiddleware")," sets the ",i.a.createElement("code",{style:{fontSize:"inherit"}},"X-Content-Type-Options")," header to nosniff when ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SECURE_CONTENT_TYPE_NOSNIFF = True")," to prevent hackers from tricking your website into executing a malicious javascript file that they uploaded via one of your forms."),i.a.createElement(o.q,{as:"p",className:"mb-3"},'This header indicates to the browser that the MIME types advertised in the Content-Type headers should not be changed (by "sniffing" the content).'),i.a.createElement(o.q,{as:"p",className:"mb-3"},"The sniffing feature is the browser being helpful when a developer or server misconfiguration misidentified the Content-Type. If the browser respected an incorrect MIME type then a javascript, css, or image file would not work and the website would break. Very helpful feature. But it can be abused:"),i.a.createElement("ul",{className:"bullet-list-blue mb-3"},i.a.createElement("li",null,"A bad actor uploads HTML containing javascript (maybe pretending to be an image file)."),i.a.createElement("li",null,"The file is served by your website but does not set MIME type in the Content-Type header"),i.a.createElement("li",null,"The browser infers the MIME type based on the content"),i.a.createElement("li",null,"The browser executes the javascript")),i.a.createElement(o.q,{as:"p",className:"mb-3"},"By setting ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SECURE_CONTENT_TYPE_NOSNIFF = True"),", the browser will not infer the MIME type if the Content-Type is not set, closing this security hole."));var qt="Website can be served with insecure HTTP",xt="missing-secure-ssl-redirect";function zt(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Your website is vulnerable because the ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SECURE_SSL_REDIRECT")," setting is not set - so a hacker can read, intercept, and change requests performed over HTTP.")}var _t=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p",className:"mb-3"},i.a.createElement("code",{style:{fontSize:"inherit"}},"SecurityMiddleware")," redirects HTTP to HTTPS when ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SECURE_SSL_REDIRECT = True")," to prevent browsers from using the website on insecure HTTP connections."),i.a.createElement(o.q,{as:"p",className:"mb-3"},"By setting ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SECURE_SSL_REDIRECT = True"),", the browser will be redirected to HTTPS if it performs a HTTP request."));zt.title=qt,zt.wordCode=xt,zt.category=x,zt.impact="high",zt.explanation=_t;var It="Session cookie is vulnerable to packet sniffing attack",jt="missing-session-cookie-secure";function Rt(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Your website is vulnerable because the ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SESSION_COOKIE_SECURE")," setting is not set - so hackers have an easier time stealing your users' session cookies on HTTP connections.")}var Mt=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p",className:"mb-3"},i.a.createElement("code",{style:{fontSize:"inherit"}},"SessionMiddleware")," marks the session cookie as secure when ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SESSION_COOKIE_SECURE = True"),", to make the browser only send cookie over secure HTTPS connection."),i.a.createElement(o.q,{as:"p",className:"mb-3"},"Cookies sent over insecure HTTP are unencrypted, so hackers can steal the session cookie using a packet sniffer - allowing them to effectively copy and paste it into their browser and be logged in as the user."));Rt.title=It,Rt.wordCode=jt,Rt.category=x,Rt.impact="high",Rt.explanation=Mt;var Ft="Session cookie is vulnerable to XSS attack",Dt="missing-session-cookie-http-only";function Ot(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Your website is vulnerable because the ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SESSION_COOKIE_HTTPONLY")," setting is not set - so hackers have an easier time stealing your users' session cookies using an XSS attack.")}var Pt=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p",className:"mb-3"},i.a.createElement("code",{style:{fontSize:"inherit"}},"SessionMiddleware")," marks the session cookie as httpOnly when ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SESSION_COOKIE_HTTPONLY = True"),", so cookie cannot be read with nefarious JavaScript in the browser."),i.a.createElement(o.q,{as:"p",className:"mb-3"},"If a bad actor successfully ran nefarious JavaScript on your website using an XSS attack then they could steal the user session cookie and authenticate as that user."));Ot.title=Ft,Ot.wordCode=Dt,Ot.category=x,Ot.impact="high",Ot.explanation=Pt;var Ht="Cross Site Request Forgery protection weak to packet sniffing",Lt="missing-csrf-secure";function Ut(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Your website is vulnerable because the ",i.a.createElement("code",{style:{fontSize:"inherit"}},"CSRF_COOKIE_SECURE")," setting is not set - so hackers have an easier time stealing your CSRF cookies on HTTP connections, allowing them to circumvent your CSRF protection.")}var At=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p",className:"mb-3"},i.a.createElement("code",{style:{fontSize:"inherit"}},"CsrfMiddleware")," marks the CSRF cookie as secure when ",i.a.createElement("code",{style:{fontSize:"inherit"}},"CSRF_COOKIE_SECURE = True"),", to make the browser only send cookie over secure HTTPS connection."),i.a.createElement(o.q,{as:"p",className:"mb-3"},"Cookies sent over insecure HTTP are unencrypted, so hackers can steal the CSRF cookie using a packet sniffer - allowing them to use it to trick the browser into thinking a request on their website was performed on your website by the logged a user.-."));Ut.title=Ht,Ut.wordCode=Lt,Ut.category=x,Ut.impact="high",Ut.explanation=At;var Bt="HSTS browser preload list not activated",Yt="missing-hsts-preload";function Xt(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Your website must set ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SECURE_HSTS_PRELOAD")," in order to be submitted to Chrome's list of sites that are hardcoded as being HTTPS only.")}var Wt=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p",className:"mb-3"},i.a.createElement("code",{style:{fontSize:"inherit"}},"SecurityMidddleware")," adds ",i.a.createElement("code",{style:{fontSize:"inherit"}},"preload")," to the HSTS header when ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SECURE_HSTS_PRELOAD = True")," to facilitate this."),i.a.createElement(o.q,{as:"p",className:"mb-3"},"Browsers that use the HSTS preload list will perform HTTPS requests without your website first returning a response with a HSTS header."));Xt.title=Bt,Xt.wordCode=Yt,Xt.category=x,Xt.impact="low",Xt.explanation=Wt;var Gt="Admin class not in admin.py",Vt="misplaced-admin-class";function Kt(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"Predictable project structure and following common patterns simplifies maintenance of a codebase."),i.a.createElement(o.q,{as:"p"},"Django developers come to expect Admin-related objects to be in admin.py. Failure to do this will result in more time spent looking for where code lives."))}Kt.title=Gt,Kt.wordCode=Vt,Kt.category=N,Kt.impact="medium";var Jt="URL name not unique",Qt="non-unique-url-name",$t="{% url 'url_name' %}";function Zt(e){return i.a.createElement(o.q,{as:"p",className:e.className},"URL names must be unique otherwise ",i.a.createElement("code",{style:{fontSize:"inherit"}},"reverse('url_name')")," and ",i.a.createElement("code",{style:{fontSize:"inherit"}},$t),' will link to the "wrong" page half of the time.')}var ea=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"Django uses the URL name to generate the view's URL. Like a ",i.a.createElement("code",{style:{fontSize:"inherit"}},"dict"),', only one entry can exist for a given "key".'));Zt.title=Jt,Zt.wordCode=Qt,Zt.category=N,Zt.impact="high",Zt.explanation=ea;var ta="Using reverse_lazy where reverse would be better",aa="reverse-lazy-misuse";function na(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Using ",i.a.createElement("code",{style:{fontSize:"inherit"}},"reverse(...)")," is better than using ",i.a.createElement("code",{style:{fontSize:"inherit"}},"reverse_lazy(...)")," when the url is being reversed after ",i.a.createElement("code",{style:{fontSize:"inherit"}},"URLConf")," has been loaded.")}var ra=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"Django looks up the URL name as defined in ",i.a.createElement("code",{style:{fontSize:"inherit"}},"URLConf")," to generate the URL. There are times when we want to use a URL before the ",i.a.createElement("code",{style:{fontSize:"inherit"}},"URLConf")," has been loaded, such as:"),i.a.createElement(o.q,{as:"ul",className:"bullet-list-blue mt-4 mb-4"},i.a.createElement(o.q,{as:"li"},"Using the URL at module level, such as in a class-based view's ",i.a.createElement("code",{style:{fontSize:"inherit"}},"success_url")),i.a.createElement(o.q,{as:"li"},"Using the URL in a view decorator such as ",i.a.createElement("code",{style:{fontSize:"inherit"}},"@permission_required('foo.bar', login_url=reverse_lazy(...))")),i.a.createElement(o.q,{as:"li"},"Using the URL in a function default keyword argument")),i.a.createElement(o.q,{as:"p",className:"mt-2 mb-2"},"If the ",i.a.createElement("code",{style:{fontSize:"inherit"}},"URLConf")," has been loaded there is no need to use ",i.a.createElement("code",{style:{fontSize:"inherit"}},"reverse_lazy(...)")," - just use ",i.a.createElement("code",{style:{fontSize:"inherit"}},"reverse(...)"),", becasue doing otherwise adds unecessary complexity."));na.title=ta,na.wordCode=aa,na.category=N,na.impact="low",na.explanation=ra;var ia="Hard-coded URL in template",sa="hard-coded-url";function la(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Hard-coding urls makes changing URLs harder, and makes linking to the wrong page easier - so harms maintainability.")}var oa=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"Django encourages giving URLs a name so they can be resoved later (rather than hard coding the URL)."),i.a.createElement(o.q,{as:"p"},"This be taken advantage of by defining a `name` in the url.py entry, and then using that name in templates."));la.title=ia,la.wordCode=sa,la.category=N,la.impact="medium",la.explanation=oa;var ca="Hard-coded static asset URL in template",ma="hard-coded-static-url";function da(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"Hard-coding static asset urls is brittle because the place the files are stored depends on the `STATICFILES_STORAGE` used - so if in prod the storage backend uploads to S3 or even renames the file then this hard-coded URL will break."),i.a.createElement(o.q,{as:"p"},"Using ",'"{% static ... %}"'," solves that as it knows exactly where the files are stored."))}da.title=ca,da.wordCode=ma,da.category=N,da.impact="medium";var ua="Importing models.py into migrations",ha="migration-model-import";function pa(e){return i.a.createElement(o.q,{as:"p",className:e.className},"It's better to use ",i.a.createElement("a",{href:"https://docs.djangoproject.com/en/3.1/ref/applications/#django.apps.apps.get_model",rel:"noopener noreferrer",target:"_blank"},i.a.createElement("code",{style:{fontSize:"inherit"}},"apps.get_model")),", which guarantees the Model's fields will reflect the fields in the database even if ",i.a.createElement("code",{style:{fontSize:"inherit"}},"models.py")," is vastly out of step with the database.")}var fa=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"The fields in Django's ",i.a.createElement("code",{style:{fontSize:"inherit"}},"models.py")," must agree with the schema in the database. When Django performs database read or write operations it uses the fields in your ",i.a.createElement("code",{style:{fontSize:"inherit"}},"models.py")," to determine the name of the database fields to ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SELECT")," and ",i.a.createElement("code",{style:{fontSize:"inherit"}},"INSERT"),"."),i.a.createElement(o.q,{as:"p"},"If ",i.a.createElement("code",{style:{fontSize:"inherit"}},"models.py")," includes fields that are not yet in the database schema then the database will throw an error."));pa.wordCode=ha,pa.title=ua,pa.category=N,pa.impact="high",pa.explanation=fa;var ga="Missing reverse migration",ya="missing-reverse-migration";function Ea(e){return i.a.createElement(o.q,{as:"p",className:e.className},"It's good to, as a minimum, specify ",i.a.createElement("code",{style:{fontSize:"inherit"}},"noop")," in ",i.a.createElement("code",{style:{fontSize:"inherit"}},"RunPython")," so the migration can be skipped when going backwards, and even better to specify a function that ",i.a.createElement("a",{href:"https://docs.djangoproject.com/en/3.1/topics/migrations/#reversing-migrations",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit"}},"undoes the migration"),".")}var ba=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"The code in ",i.a.createElement("code",{style:{fontSize:"inherit"}},"forwards")," mutates the data, but in order to undo the change then ",i.a.createElement("code",{style:{fontSize:"inherit"}},"reverse_code")," is needed."),i.a.createElement(o.q,{as:"p"},"If ",i.a.createElement("code",{style:{fontSize:"inherit"}},"reverse_code")," is missing then when an attempt is made to undo the migration then Django will raise ",i.a.createElement("code",{style:{fontSize:"inherit"}},"IrreversibleError"),"."),i.a.createElement(o.q,{as:"p"},"This is a problem because it prevents rolling back the state of the database, which may be needed if a bug is detected after a production deployment and the last good version of the app needs deploying back to production. Without ",i.a.createElement("code",{style:{fontSize:"inherit"}},"reverse_code"),", the state of the database will be out of step with the app code."));Ea.title=ga,Ea.wordCode=ya,Ea.category=N,Ea.impact="high",Ea.explanation=ba;var wa="Using len(queryset) instead of queryset.count()",va="queryset-length";function Sa(e){return i.a.createElement(o.q,{as:"p",className:e.className},i.a.createElement("code",{style:{fontSize:"inherit"}},"len(queryset)")," performs the count at application level. That is much less efficient than doing ",i.a.createElement("code",{style:{fontSize:"inherit"}},"queryset.count()"),", which does the calculation at database level and just returns the count.")}var Ta=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"Querysets are ",i.a.createElement("a",{href:"https://docs.djangoproject.com/en/3.1/topics/db/queries/#querysets-are-lazy",target:"_blank",rel:"noopener noreferrer"},"lazily evaluated")," - meaning the records are not read from the database until code interact with the data. Thats's why we can do ",i.a.createElement("code",{style:{fontSize:"inherit"}},"queryset.all()")," without downloading every records from the database."),i.a.createElement(o.q,{as:"p"},"An example of something that interacts with the data is doing ",i.a.createElement("code",{style:{fontSize:"inherit"}},"len(queryset)"),". This ",i.a.createElement("i",null,"will")," read all the records in the queryset: effectively downloading the database over the internet. Not particularly efficient."),i.a.createElement(o.q,{as:"p"},"On the other hand doing ",i.a.createElement("code",{style:{fontSize:"inherit"}},"queryset.count()")," handles the calculation at the database level by executing SQL like ",i.a.createElement("code",{style:{fontSize:"inherit"}},"SELECT COUNT(*) FROM table"),"."),i.a.createElement(o.q,{as:"p"},"That means using ",i.a.createElement("code",{style:{fontSize:"inherit"}},"queryset.count()")," makes the code quicker, and improves database performance. Plus imagine the waste in downloading 5000 records only to check the length and throw them away at the end! Having said that though, if the records will need reading after the length if checked, then ",i.a.createElement("code",{style:{fontSize:"inherit"}},"len(queryset)")," can be valid."));Sa.title=wa,Sa.wordCode=va,Sa.category=q,Sa.impact="medium",Sa.explanation=Ta;var ka="Not using foreign keys directly",Ca="indirect-foreign-key";function Na(e){return i.a.createElement(o.q,{as:"p",className:e.className},"When working with foreign keys, accessing the related field will result in a database read. That can be eliminated by using ",i.a.createElement("code",{style:{fontSize:"inherit"}},"*_id"),", which is the foreign key value that Django has already cached on the object to make this scenario more efficient.")}Na.title=ka,Na.wordCode=Ca,Na.category=q,Na.impact="medium";var qa="Comparing queryset.count() instead of checking queryset.exists()",xa="count-instead-exists";function za(e){return i.a.createElement(o.q,{as:"p",className:e.className},"Comparing ",i.a.createElement("code",{style:{fontSize:"inherit"}},"queryset.count()")," is less efficient than checking ",i.a.createElement("code",{style:{fontSize:"inherit"}},"queryset.exists()"),", so use ",i.a.createElement("code",{style:{fontSize:"inherit"}},"querySet.count()")," if you only want the count, and use ",i.a.createElement("code",{style:{fontSize:"inherit"}},"queryset.exists()")," if you only want to find out if at least one result exists.")}var _a=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},i.a.createElement("code",{style:{fontSize:"inherit"}},"queryset.count()")," performs an SQL operation that scans every row in the database table. ",i.a.createElement("code",{style:{fontSize:"inherit"}},"queryset.exists()")," simply reads a single record in the most optimized way (removing ordering, clearing any user-defined ",i.a.createElement("code",{style:{fontSize:"inherit"}},"select_related(...)")," or ",i.a.createElement("code",{style:{fontSize:"inherit"}},"distinct(...)"),"."),i.a.createElement(o.q,{as:"p"},"This is especially relevant for Postgres because ",i.a.createElement("code",{style:{fontSize:"inherit"}},"count()")," can be very expensive."));za.title=qa,za.wordCode=xa,za.category=q,za.impact="medium",za.explanation=_a;var Ia="Checking queryset truthiness instead of checking queryset.exists()",ja="truthy-instead-exists";function Ra(e){return i.a.createElement(o.q,{as:"p",className:e.className},"This can load every row in the database table into memory because the queryset is evaluated. Checking if a queryset is truthy/falsey is much less efficient than checking ",i.a.createElement("code",{style:{fontSize:"inherit"}},"queryset.exists()"),".")}var Ma,Fa=i.a.createElement(i.a.Fragment,null,i.a.createElement(o.q,{as:"p"},"Querysets are lazy, so do not do database reads until the data is interacted with by the code. Checking truthiness evaluates the queryset, and reads every row in the queryset in one go - loading all of them into memory."),i.a.createElement(o.q,{as:"p"},"This is especially inefficient if the table is very large: it can cause a CPU spike on the database and use a lot of memory on the web server. So instead of pulling every single row from the table, check ",i.a.createElement("code",{style:{fontSize:"inherit"}},"queryset.exists()"),", which simply tries to read a single record from the table in a very efficient way."));function Da(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return Oa(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Oa(e,t)}(e))){var t=0,a=function(){};return{s:a,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw r}}}}function Oa(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}Ra.title=Ia,Ra.wordCode=ja,Ra.category=q,Ra.impact="medium",Ra.explanation=Fa;var Pa={C1001:j,C1002:D,C2000:L,C2001:Y,C2002:V,C2003:$,C2004:ae,C2005:se,C2006:me,C2008:pe,C2011:Ee,C3000:Se,C3002:Ne,C3003:_e,C4000:Me,C4001:Oe,C4002:Le,C4003:Be,C4004:Ge,C4005:Qe,C4006:tt,C4007:it,C4008:ct,C4009:ht,C4010:yt,C4011:vt,C4012:Ct,C4013:zt,C4014:Rt,C4015:Ot,C4016:Ut,C4017:Xt,C6001:Zt,C6002:na,C5000:Kt,C7000:la,C7001:da,C8000:pa,C8001:Ea,C9000:Sa,C9001:Na,C9002:za,C9003:Ra};function Ha(e){for(var t=[],a=e[0][0],n=0;n<e[e.length-1][0];n++)t[n]="";var r,i=Da(e);try{for(i.s();!(r=i.n()).done;){var s=r.value;t[s[0]-a]=s[1]}}catch(l){i.e(l)}finally{i.f()}return t.join("\n")}var La=function(e,t,a,n,r){return"https://github.com/".concat(e,"/").concat(t,"/blob/").concat(a,"/").concat(n,"#L").concat(r||1)},Ua=function(e){var t,a=e.owner,n=e.repository,r=e.branch,l=e.message,c=e.showLink,m=e.className,u=e.showLabel,h=Ha(l.diff.before),p=Ha(l.diff.after),f=function(e){return Math.min(e.diff.before[0][0],e.diff.after[0][0])-1}(l),g=La(a,n,r,l.path,l.line),y=c?i.a.createElement("a",{className:"link-gray",target:"_blank",rel:"noopener noreferrer",href:g},"line ",l.line," of ",l.path):i.a.createElement(o.q,null,"line ",l.line," of ",l.path);return i.a.createElement(o.b,{className:m+" hide-sm"},u&&i.a.createElement("p",{className:m},"A suggested change for ",y," is:"),i.a.createElement(d.a,(t={linesOffset:l.diff.before[0][0],oldValue:h,newValue:p,splitView:!1,compareMethod:"diffLines"},Object(s.a)(t,"linesOffset",f),Object(s.a)(t,"disableWordDiff",!0),Object(s.a)(t,"extraLinesSurroundingDiff",0),t)))};Ua.defaultProps={className:"mb-6",showLabel:!0};var Aa=(Ma={},Object(s.a)(Ma,"high","red.5"),Object(s.a)(Ma,"medium","blue.5"),Object(s.a)(Ma,"low","green.5"),Ma);function Ba(e){var t=Ka(e.messageId),a=Aa[t];return i.a.createElement(o.m,{className:"hide-sm",bg:a},t)}function Ya(e){var t=Ja(e.messageId);return i.a.createElement(o.m,{className:"hide-sm"},t)}var Xa=function(e){var t=Pa[e.messageId];return i.a.createElement(o.b,{className:e.className},i.a.createElement(t,e))},Wa=function(e){return Pa[e]},Ga=function(e){return Pa[e].explanation},Va=function(e){return Pa[e].title},Ka=function(e){return Pa[e].impact},Ja=function(e){return Pa[e].category};a(98),a(48),a(51);var Qa=function(e){return i.a.createElement(o.j,{variant:"danger",marginBottom:"30px"},"GitHub replied permission denied. Do you have permission for this repo? Contact us if you think this is an error.")};function $a(e){var t=Wa(e.code);return i.a.createElement(o.b,null,i.a.createElement(o.a,{className:"bg-gray p-2 f5 text-mono",style:{borderBottomLeftRadius:0,borderBottomRightRadius:0,borderBottom:0}},e.title,i.a.createElement(o.n,{style:{float:"right"}},i.a.createElement(Ya,{messageId:e.code}),i.a.createElement(Ba,{style:{verticalAlign:"middle"},messageId:e.code}))),i.a.createElement(o.a,{className:"p-2 bg-white",style:{borderTopLeftRadius:0,borderTopRightRadius:0}},i.a.createElement(d.a,{oldValue:e.before,newValue:e.after,splitView:!1,hideLineNumbers:!0,showDiffOnly:!1,disableWordDiff:!0})),!e.hideDetails&&i.a.createElement(o.q,{className:"".concat(e.textClassName," lead p-2 clearfix mt-4")},i.a.createElement(t,{className:"d-inline"}),i.a.createElement("span",null," ",i.a.createElement(c.b,{to:"/advice/".concat(e.code),target:"_blank",className:"".concat(e.textClassName," text-underline")},"Read more")," ")))}function Za(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return en(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return en(e,t)}(e))){var t=0,a=function(){};return{s:a,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw r}}}}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var tn=function(e){var t,a,n=new Map,r=Za(e);try{for(r.s();!(a=r.n()).done;){var i=a.value;"line_centric"===i.message_type&&(t=i.path,n.has(t)||n.set(t,[]),n.get(t).push(i))}}catch(s){r.e(s)}finally{r.f()}return Array.prototype.concat.apply([],Array.from(n.values()))};function an(e){var t=e.setState,a=e.messages,r=e.activeMessageIndex,c=e.acceptedChanges,m=e.skippedChanges,d=e.isCheckInProgress,u=e.isCreatePullRequestPermissionDenied,h=e.handleSave,p=e.style,f=e.isFinshDisabled,g=tn(a);if(0===g.length)return d?i.a.createElement("p",{className:"container-lg lead"},"Auditing codebase. Please wait."):i.a.createElement("p",{className:"container-lg lead"},"No issue found that can be auto fixed.");function y(e,t){var a,r=Za(g.entries());try{for(r.s();!(a=r.n()).done;){var i=a.value,s=Object(n.a)(i,2),l=s[0],o=s[1];if(-1===e.indexOf(o)&&-1===t.indexOf(o))return l}}catch(c){r.e(c)}finally{r.f()}}function E(){var e,t={},a=Za(c);try{for(a.s();!(e=a.n()).done;){var n=e.value;t[n.path]=t[n.path]||{},t[n.path][n.line]=n.message_ids}}catch(l){a.e(l)}finally{a.f()}var r,i=Za(m);try{for(i.s();!(r=i.n()).done;){var s=r.value;t[s.path]=t[s.path]||{},t[s.path][s.line]=["0000"].concat(s.message_ids)}}catch(l){i.e(l)}finally{i.f()}h(t)}function b(e){return g.filter(function(t){return 1===t.message_ids.length&&t.message_ids[0]===e&&-1===c.indexOf(t)&&-1===m.indexOf(t)})}var w=g[r],v=w&&1==w.message_ids.length?b(w.message_ids[0]):[],S=c.length+m.length,T=(g.length,Object(l.a)({minHeight:"500px",background:"rgba(0, 0, 0, 0) linear-gradient(to right, rgb(54, 55, 149), rgb(0, 92, 151)) repeat scroll 0% 0%",alignItems:"center",justifyContent:"center"},p));return i.a.createElement(o.b,{className:"pb-6 pt-md-6 d-md-flex",style:T},u&&i.a.createElement(Qa,null),w?i.a.createElement(nn,Object(s.a)({message:w,handleAcceptOne:function(e){c.indexOf(e);var a=c.concat([e]);t({acceptedChanges:a,activeMessageIndex:y(a,m),skippedChanges:m})},handleSkipOne:function(e){m.indexOf(e);var a=m.concat([e]);t({acceptedChanges:c,activeMessageIndex:y(c,a),skippedChanges:a})},handleAcceptAllClick:function(e){var a,n=c.concat([]),r=Za(b(e.message_ids[0]));try{for(r.s();!(a=r.n()).done;){var i=a.value;n.includes(i)||n.push(i)}}catch(s){r.e(s)}finally{r.f()}t({acceptedChanges:n,activeMessageIndex:y(n,m),skippedChanges:m})},handleSkipAllClick:function(e){var a,n=m.concat([]),r=Za(b(e.message_ids[0]));try{for(r.s();!(a=r.n()).done;){var i=a.value;n.includes(i)||n.push(i)}}catch(s){r.e(s)}finally{r.f()}t({acceptedChanges:c,activeMessageIndex:y(c,n),skippedChanges:n})},similarCount:v.length,messageCount:g.length,handleClickSave:E,processedChanges:S},"handleClickSave",E)):i.a.createElement(rn,{acceptedCount:c.length,skippedCount:m.length,handleClickSave:E,isFinshDisabled:f}))}function nn(e){var t=100/e.messageCount*e.processedChanges;return i.a.createElement(o.a,{className:"bg-white col-md-6"},i.a.createElement(o.b,{className:"bg-gray p-2 border-bottom border-gray-dark d-inline-flex width-full",style:{alignItems:"center",gap:"12px"}},i.a.createElement(o.q,null,i.a.createElement(o.q,{className:"hide-sm"},"Issue")," ",i.a.createElement("b",null,e.processedChanges+1)," of ",i.a.createElement("b",null,e.messageCount)),i.a.createElement(o.o,{style:{flex:1},progress:t})),i.a.createElement(o.b,{className:"p-md-4 pt-4"},i.a.createElement(o.b,null,i.a.createElement($a,{title:e.message.path,code:e.message.message_ids[0],before:Ha(e.message.diff.before),after:Ha(e.message.diff.after),hideDetails:!0,className:"text-left"})),i.a.createElement(o.b,{className:"mt-4"},e.message.message_ids.map(function(e,t){var a=Ga(e);return i.a.createElement(o.b,{key:t,className:"mb-4"},i.a.createElement(o.l,{fontSize:3,className:"mb-2"},Va(e)),i.a.createElement(Xa,{className:"f4 d-inline",messageId:e}),a&&i.a.createElement(o.h,null,i.a.createElement(o.q,{as:"summary"},i.a.createElement("a",null,"Read more")),a))}))),i.a.createElement(o.b,{className:"bg-gray text-right p-2 border-top border-gray-dark d-flex",justifyContent:"space-between"},i.a.createElement(o.f,{disabled:0===e.processedChanges,onClick:e.handleClickSave},"Finish",i.a.createElement(o.q,{className:"hide-sm"}," and save")),i.a.createElement(o.e,{className:"text-left"},e.similarCount>1&&i.a.createElement(o.i,{width:"42px"},i.a.createElement(o.i.Button,{style:{paddingLeft:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0}},"\xa0"),i.a.createElement(o.i.Menu,{direction:"sw"},i.a.createElement(o.i.Item,{style:{cursor:"pointer"},onClick:function(){return e.handleAcceptAllClick(e.message)}},"Accept all ",e.similarCount," like this"),i.a.createElement(o.i.Item,{style:{cursor:"pointer"},onClick:function(){return e.handleSkipAllClick(e.message)}},"Skip all ",e.similarCount," like this"))),i.a.createElement(o.d,{style:{borderRight:0,borderLeftWidth:"1px"},onClick:function(){return e.handleSkipOne(e.message)}},"Skip"),i.a.createElement(o.f,{style:{borderLeft:0},onClick:function(){return e.handleAcceptOne(e.message)}},"Accept change"))))}function rn(e){var t=e.acceptedCount,a=e.skippedCount,n=e.handleClickSave,r=e.isFinshDisabled;return i.a.createElement(o.a,{className:"bg-white d-inline-block"},i.a.createElement(o.b,{className:"bg-gray p-2 border-bottom border-gray-dark d-inline-flex width-full",style:{alignItems:"center",gap:"12px"}},i.a.createElement("b",null,"Change summary")),i.a.createElement(o.b,{className:"d-inline-block p-4 f3"},i.a.createElement(o.q,null,"You have chosen to fix ",t," ",t>1?"issues":"issue"),a>0&&i.a.createElement(o.q,null," and skip ",a," ",a>1?"issues":"issue"),i.a.createElement(o.q,null,".")),i.a.createElement(o.b,{className:"bg-gray p-2 border-top border-gray-dark text-center"},i.a.createElement(o.f,{onClick:n,disabled:r},"Finish and save")))}var sn={height:"100vh",background:"rgba(0, 0, 0, 0) linear-gradient(to right, rgb(54, 55, 149), rgb(0, 92, 151)) repeat scroll 0% 0%",alignItems:"start",justifyContent:"center"},ln={backgroundColor:"rgb(27, 31, 35)",color:"white",position:"sticky",top:"0px",zIndex:100};function on(){return i.a.createElement(o.b,{style:ln,className:"pl-md-1"},i.a.createElement(o.k,{height:"61px"},i.a.createElement("div",{style:{color:"white"},className:"d-flex"},i.a.createElement("a",{href:"https://django.doctor",target:"_blank"},i.a.createElement("img",{height:"75px",width:"75px",alt:"Logo of a fox dressed as a Doctor",style:{marginTop:"2px"},src:"/torso-compressed.png"})),i.a.createElement("div",{className:"text-right",style:{lineHeight:"1.1",marginTop:"6px",marginLeft:"-10px"}},i.a.createElement("a",{href:"https://django.doctor",target:"_blank"},i.a.createElement(o.l,{fontSize:3,mt:"5px",className:"hide-sm text-white"},"Django Doctor")),i.a.createElement("div",{className:"hide-sm"},i.a.createElement("svg",{class:"octicon octicon-verified text-green mr-1",height:"12",viewBox:"0 0 16 16",version:"1.1",width:"12","aria-hidden":"true"},i.a.createElement("path",{"fill-rule":"evenodd",d:"M9.585.52a2.678 2.678 0 00-3.17 0l-.928.68a1.178 1.178 0 01-.518.215L3.83 1.59a2.678 2.678 0 00-2.24 2.24l-.175 1.14a1.178 1.178 0 01-.215.518l-.68.928a2.678 2.678 0 000 3.17l.68.928c.113.153.186.33.215.518l.175 1.138a2.678 2.678 0 002.24 2.24l1.138.175c.187.029.365.102.518.215l.928.68a2.678 2.678 0 003.17 0l.928-.68a1.17 1.17 0 01.518-.215l1.138-.175a2.678 2.678 0 002.241-2.241l.175-1.138c.029-.187.102-.365.215-.518l.68-.928a2.678 2.678 0 000-3.17l-.68-.928a1.179 1.179 0 01-.215-.518L14.41 3.83a2.678 2.678 0 00-2.24-2.24l-1.138-.175a1.179 1.179 0 01-.518-.215L9.585.52zM7.303 1.728c.415-.305.98-.305 1.394 0l.928.68c.348.256.752.423 1.18.489l1.136.174c.51.078.909.478.987.987l.174 1.137c.066.427.233.831.489 1.18l.68.927c.305.415.305.98 0 1.394l-.68.928a2.678 2.678 0 00-.489 1.18l-.174 1.136a1.178 1.178 0 01-.987.987l-1.137.174a2.678 2.678 0 00-1.18.489l-.927.68c-.415.305-.98.305-1.394 0l-.928-.68a2.678 2.678 0 00-1.18-.489l-1.136-.174a1.178 1.178 0 01-.987-.987l-.174-1.137a2.678 2.678 0 00-.489-1.18l-.68-.927a1.178 1.178 0 010-1.394l.68-.928c.256-.348.423-.752.489-1.18l.174-1.136c.078-.51.478-.909.987-.987l1.137-.174a2.678 2.678 0 001.18-.489l.927-.68zM11.28 6.78a.75.75 0 00-1.06-1.06L7 8.94 5.78 7.72a.75.75 0 00-1.06 1.06l1.75 1.75a.75.75 0 001.06 0l3.75-3.75z"})),i.a.createElement("a",{style:{fontSize:"12px",verticalAlign:"bottom"},href:"https://github.com/marketplace/django-doctor/",className:"text-white",target:"_blank"},"Verified by GitHub")))),i.a.createElement("div",{style:{marginLeft:"auto",marginTop:"14px",marginRight:"14px",height:"47px"}},i.a.createElement(o.d,{as:"a",href:"https://django.doctor/price",target:"_blank"},"Please purchase license for commercial use"))))}function cn(e){return i.a.createElement(o.b,{className:"d-md-flex",style:sn},i.a.createElement(o.a,{className:"bg-white d-inline-block text-center",style:{marginTop:"100px"}},i.a.createElement(o.b,{className:"p-6"},i.a.createElement(o.q,{fontSize:"42px",role:"img"},"\ud83e\udd8a"),i.a.createElement("h3",{className:"mb-4"},"Done!"),i.a.createElement(o.q,{as:"p",className:"f3"},"The fixes have been saved to your filesystem."),i.a.createElement(o.q,{as:"p"},"Go ahead and run ",i.a.createElement("code",{style:{fontSize:"inherit"}},"git diff")," to see your changes.")),i.a.createElement(o.b,{className:"bg-gray p-2 border-top border-gray-dark text-center"},i.a.createElement(o.f,{onClick:window.close},"Close tab"))))}t.default=function(e){var t=i.a.useState({isInProgress:!1,isComplete:!1}),a=Object(n.a)(t,2),r=a[0],s=a[1],l=i.a.useState({activeMessageIndex:0,acceptedChanges:[],skippedChanges:[]}),o=Object(n.a)(l,2),m=o[0],d=o[1];return i.a.createElement(c.a,null,i.a.createElement(on,null),r.isComplete?i.a.createElement(cn,null):i.a.createElement(an,{messages:e.messages,handleSave:function(e){s({isInProgress:!0,isComplete:!1}),fetch("/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){s({isInProgress:!1,isComplete:!0})}).catch(function(e){s({isInProgress:!1,isComplete:!1})})},activeMessageIndex:m.activeMessageIndex,acceptedChanges:m.acceptedChanges,skippedChanges:m.skippedChanges,setState:d,style:{minHeight:"100vh",alignItems:"start"},isFinshDisabled:r.isInProgress}))}}}]);
//# sourceMappingURL=1.2dbe45c8.chunk.js.map